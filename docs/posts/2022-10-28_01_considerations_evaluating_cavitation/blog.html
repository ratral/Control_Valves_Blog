<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.84">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Raúl Trujillo Álvarez">
<meta name="dcterms.date" content="2022-10-28">

<title>Notes about Water Control Valves - Considerations for Evaluating Control Valve Cavitation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: 1;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Notes about Water Control Valves</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">Dr.&nbsp;Raúl Trujillo Álvarez</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ratral"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Dr_Raul"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/dr-raul-trujillo/"><i class="bi bi-linkedin" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#essential-features-of-the-k_v-value-calculation" id="toc-essential-features-of-the-k_v-value-calculation" class="nav-link active" data-scroll-target="#essential-features-of-the-k_v-value-calculation">Essential features of the <span class="math inline">\(K_v\)</span> value calculation</a>
  <ul class="collapse">
  <li><a href="#flow-without-flow-restriction-turbulent-flow-and-no-cavitation." id="toc-flow-without-flow-restriction-turbulent-flow-and-no-cavitation." class="nav-link" data-scroll-target="#flow-without-flow-restriction-turbulent-flow-and-no-cavitation.">Flow without flow restriction, turbulent flow and no cavitation.</a></li>
  <li><a href="#flow-with-flow-restriction-cavitation-without-pipe-fittings" id="toc-flow-with-flow-restriction-cavitation-without-pipe-fittings" class="nav-link" data-scroll-target="#flow-with-flow-restriction-cavitation-without-pipe-fittings">Flow with flow restriction (Cavitation) without pipe fittings</a></li>
  </ul></li>
  <li><a href="#cavitation-levels" id="toc-cavitation-levels" class="nav-link" data-scroll-target="#cavitation-levels">Cavitation Levels</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Considerations for Evaluating Control Valve Cavitation</h1>
<p class="subtitle lead">Flow with flow restriction without pipe fittings</p>
  <div class="quarto-categories">
    <div class="quarto-category">hydraulics</div>
    <div class="quarto-category">theory</div>
    <div class="quarto-category">valves</div>
    <div class="quarto-category">analysis</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Raúl Trujillo Álvarez </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 28, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="essential-features-of-the-k_v-value-calculation" class="level1">
<h1>Essential features of the <span class="math inline">\(K_v\)</span> value calculation</h1>
<p>In many applications, the flow through the control valve is determined by reducers or other accessories (orifice plates) attached to the control valve. When cavitation occurs in a valve, the flow is further limited by the evaporation of the liquid in the valve. Therefore, to determine the flow through the control valve, the following should be analyzed:</p>
<ol type="1">
<li>Flow without flow restriction, turbulent flow and no cavitation.</li>
<li>Flow with flow restriction but without pipe fittings</li>
<li>Flow with flow restriction and with pipe fittings</li>
</ol>
<p>In this blog, only points 1. and 2. are considered. Flow with flow restriction and fittings will be considered in the following blog.</p>
<section id="flow-without-flow-restriction-turbulent-flow-and-no-cavitation." class="level2">
<h2 class="anchored" data-anchor-id="flow-without-flow-restriction-turbulent-flow-and-no-cavitation.">Flow without flow restriction, turbulent flow and no cavitation.</h2>
<p><span class="math display">\[
Q = K_v \cdot F_R \cdot \sqrt{\frac{\Delta P}{(\rho_{1}/\rho_{0})}} \approx  K_v \cdot \sqrt{\Delta P}
\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q\)</span> is the flow; Unit: <span class="math inline">\(m^3/s\)</span></li>
<li><span class="math inline">\(F_R\)</span> Reynolds number factor; Unit: Dimensionless. For turbulent flow, <span class="math inline">\(F_R = 1\)</span></li>
<li><span class="math inline">\(\rho_{1}/\rho_{0}\)</span> Relative density (<span class="math inline">\(\rho_{1}/\rho_{0} = 1.0\)</span> for water at <span class="math inline">\(15°C\)</span>); Unit: Dimensionless</li>
<li><span class="math inline">\(\Delta P\)</span> Differential pressure between upstream and downstream pressure taps <span class="math inline">\((P_1-P_2)\)</span>; Unit: bar</li>
</ul>
</section>
<section id="flow-with-flow-restriction-cavitation-without-pipe-fittings" class="level2">
<h2 class="anchored" data-anchor-id="flow-with-flow-restriction-cavitation-without-pipe-fittings">Flow with flow restriction (Cavitation) without pipe fittings</h2>
<p>The vapor pressure of liquids depends on the temperature. If the static pressure on the fluid falls below this vapor pressure, evaporation occurs. The lowest pressure occurs when throttling in the valve occurs in the so-called “vena contracta.” Depending on the design of the throttle point, there is a greater or lesser pressure recovery. Under certain circumstances, evaporation must also be considered when the outflow pressure <span class="math inline">\(P_2\)</span> is greater than the vapor pressure of the liquid. Local evaporation, in the vena contracta, initially increases in volume. The cross-section of the choke becomes slimmer, and the calculated flow rate may not be reached if evaporation is not taken into account in the calculation. Cavitation occurs when the pressure increases and reverses evaporation. When the evaporation is reversed (condensation) and reaches a particular energy potential, it can quickly damage the throttle body and seat of the valve. The continuity of the flow coefficient is interrupted when cavitation occurs, and the dynamic interaction between flow and its restriction is affected. Additionally, cavitation increases the compressibility of the fluid locally and reduces the flow. The density of the water, too, is drastically reduced by the bubble volume in the restriction area as the pressure ratio rises [@wagner2008].</p>
<p>The critical pressure is reached at the vena contracta at the differential pressure <span class="math inline">\(\Delta{P}_{max}\)</span>, below the vapor pressure.The maximum allowable differential pressure for the calculation of control valves without fittings can be calculated as follows:</p>
<p><span class="math display">\[
\Delta{P}_{max}=F^{2}_{L} \cdot (P_1-F_F \cdot p_v)
\]</span></p>
<p>The flow rate before cavitation starts is:</p>
<p><span class="math display">\[
Q = K_v \cdot F_R \cdot \sqrt{\frac{\Delta P}{(\rho_{1}/\rho_{0})}}
\]</span></p>
<p>So:</p>
<p><span class="math display">\[
Q_{max(L)} = K_v \cdot F_L \cdot F_R \cdot \sqrt{\frac{(P_1-F_F \cdot P_v)}{(\rho_{1}/\rho_{0})}}
\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q\)</span> is the flow; Unit: <span class="math inline">\(m^3/s\)</span></li>
<li><span class="math inline">\(F_L\)</span> Liquid pressure recovery factor of a control valve without attached fittings. The value <span class="math inline">\(F_L\)</span> provided by the manufacturer refers to the value when the control valve is fully open. Unit: Dimensionless</li>
<li><span class="math inline">\(F_R\)</span> Reynolds number factor; Unit: Dimensionless. For turbulent flow, <span class="math inline">\(F_R = 1\)</span></li>
<li><span class="math inline">\(F_F\)</span> Liquid critical pressure ratio factor; Unit: Dimensionless <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
<li><span class="math inline">\(P_v\)</span> Absolute vapor pressure of the liquid at inlet temperature ; Unit: bar</li>
<li><span class="math inline">\(\rho_{1}/\rho_{0}\)</span> Relative density (<span class="math inline">\(\rho_{1}/\rho_{0} = 1.0\)</span> for water at <span class="math inline">\(15°C\)</span>); Unit: Dimensionless</li>
<li><span class="math inline">\(\Delta P\)</span> Differential pressure between upstream and downstream pressure taps; Unit: bar</li>
</ul>
<p>The above functions, for the valve in a position <span class="math inline">\(x\%\)</span> (for example, <span class="math inline">\(100\%\)</span> open), can be represented in the following two ways:</p>
<div id="fig-flowrestriction1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Flow_with_restriction_01.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Flow with flow restriction (Cavitation) <span class="citation" data-cites="Wagner">@Wagner</span>, Walter. Regel- und Sicherheitsarmaturen.</figcaption><p></p>
</figure>
</div>
<div id="fig-flowrestriction2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Flow_with_restriction_02.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Liquid flow as a function of the differential pressure (Handbook for Control Valve Sizing - Parcol.)</figcaption><p></p>
</figure>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Liquid pressure recovery factor <span class="math inline">\(F_L\)</span> : is a number used to describe the ratio between the pressure recovery after the Vena-Contracta and the pressure drop at the Vena-Contracta. in other words; It represents the pressure recovered between the Vena-Contracta and the valve outlet.</p>
<p>It is also essential to understand that <span class="math inline">\(F_L\)</span> is not a cavitation parameter. It is a choked flow parameter, and its only use is to determine the theoretical blocked flow point.</p>
</div>
</div>
</section>
</section>
<section id="cavitation-levels" class="level1">
<h1>Cavitation Levels</h1>
<p>An analytical solution to the problem of cavitation is not easy. Emphasis has, by necessity, been concentrated on laboratory experiments to explore physics, develop instrumentation to measure cavitation, and develop empirical relationships for predicting various cavitation levels. Therefore, based on laboratory and field experience, valve manufacturers should be able to recommend which cavitation level<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> is appropriate for their valve for a specific application <span class="citation" data-cites="Tuli">[@Tuli]</span>.</p>
<p>If the valve manufacturer’s recommended cavitation levels exceed the maximum<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, the <span class="math inline">\(\sigma_{mv}\)</span> should be the maximum acceptable value and should only be overtaken in emergencies for the short term.</p>
<p>As seen in <a href="#fig-flowrestriction1">Figure&nbsp;1</a> and <a href="#fig-flowrestriction2">Figure&nbsp;2</a>, the liquid pressure recovery factor <span class="math inline">\(F_L\)</span> acquired experimentally, with a theoretical model or a numerical model (CFD<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>) can be used to quantify flow conditions in locked cavitation (maximum cavitation level).</p>
<p><span class="math display">\[
\sigma_{mv} = \frac{1}{F^{2}_{L}} = \frac{(P_1-F_F \cdot p_v)}{\Delta{P}_{max}}
\]</span></p>
<p>The Incipient cavitation levels <span class="math inline">\(\sigma_{i}\)</span> and The constant cavitation <span class="math inline">\(\sigma_{c}\)</span> are also defined, where <span class="math inline">\(X_{FZ}\)</span> and <span class="math inline">\(X_{C}\)</span> are the respective coefficients:</p>
<p><span class="math display">\[
\sigma_i =  \frac{1}{X_{FZ}^2} = \frac{(P_1 - P_v)}{\Delta P}
\]</span> <span class="math display">\[
\sigma_c = \frac{1}{X_{C}^2} = \frac{(P_1 - P_v)}{\Delta P}
\]</span> <span class="math inline">\(K_C\)</span> specifies where cavitation begins to appear in a flow of water through the valve with such intensity that, under constant upstream conditions, the flow rate deviation from linearity vs.&nbsp;<span class="math inline">\(\sqrt{\Delta P}\)</span> reaches the <span class="math inline">\(2\%\)</span> (see <a href="#fig-flowrestriction2">Figure&nbsp;2</a>). Such an assumption is only adequate when the diagram of the actual flow rate versus <span class="math inline">\(\sqrt{\Delta P}\)</span>, under constant upstream conditions, shows a sharp break point between the linear and horizontal zones. A simple form of calculation of the <span class="math inline">\(K_C\)</span> is the following formula [Handbook for Control Valve Sizing - Parcol]:</p>
<p><span class="math display">\[
K_C = 0.80 \cdot F_L^2
\]</span> then the coefficient of proportionality between <span class="math inline">\(K_{FZ}\)</span> and <span class="math inline">\(F_L^2\)</span> can come down to <span class="math inline">\(0.65\)</span>, so:</p>
<p>The beginning cavitation coefficient can be extrapolated from the curve in <a href="#fig-flowrestriction2">Figure&nbsp;2</a>. A <em>first approximation</em> value would be:</p>
<p><span class="math display">\[
K_{FZ} = 0.592 \cdot F_L^2
\]</span></p>
<p>In this way, all cavitation limits can be represented as a function of <span class="math inline">\(F_L\)</span>.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The values of <span class="math inline">\(F_L\)</span>, <span class="math inline">\(K_C\)</span>, and <span class="math inline">\(K_{FZ}\)</span> must be verified with Experimentation, Theoretical Models, and Numerical Models like CFD.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The transition between the zero cavitation zone and choked flow can be represented mathematically as a <a href="https://mathalino.com/reviewer/surveying-and-transportation-engineering/parabolic-curve#:~:text=Vertical%20Parabolic%20Curve&amp;text=which%20is%20interpreted%20as%20rate,rate%20of%20change%20of%20slope.&amp;text=L%20%3D%20length%20of%20parabolic%20curve,corresponds%20to%20the%20plan%20distance.">Vertical Parabolic curve</a>. Vertical curves provide gradual change between two adjacent steep grade lines. The curve used to connect the two adjacent grades is a parabola. We will see these calculations in a future Blog.</p>
</div>
</div>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" role="doc-bibliography">
<ul>
<li>Wagner, Walter. Regel- und Sicherheitsarmaturen. 1. Aufl. dieser Ausg, Vogel, 2008.</li>
<li><a href="https://www.parcol.com/docs/ACA0101_gb.pdf">Handbook for Control Valve Sizing - Parcol</a>. TECHNICAL BULLETIN 1-ITECHNICAL BULLETIN 1-I.</li>
<li>Tullis, J. P. Cavitation Guide for Control Valves. NUREG/CR-6031, Nuclear Regulatory Commission, Washington, DC (United States). Div. of Engineering; Tullis Engineering Consultants, Logan, UT (United States), 1 Apr.&nbsp;1993, https://doi.org/10.2172/10155405.</li>
<li>Parabolic Curve | Surveying and Transportation Engineering Review at MATHalino. https://mathalino.com/reviewer/surveying-and-transportation-engineering/parabolic-curve. Accessed 25 Oct.&nbsp;2022.</li>
<li>ANSI/ISA, editor. ANSI/ISA-75.01.01-2007, Flow Equations for Sizing Control Valves. ISA, 2007.</li>
<li>British Standard, editor. BS EN 60534-1:2005. Control Valve Terminology and General Considerations. 2005.</li>
<li>ANSI/ISA, editor. ANSI/ISA-RP75.21, Process Data Presentation for Control Valves. Instrument Society of America, 1996.</li>
<li>ANSI/ISA, editor. ANSI/ISA–RP75.23–1995, Considerations for Evaluating Control Valve Cavitation. Instrument Society of America, 1995.</li>
<li>American National Standards Institute, and Instrument Society of America. Flow Equations for Sizing Control Valves: Standard. 1985.</li>
<li>ANSI/ISA. ANSI/ISA-75.11-1985 (R1996) , Inherent Flow Characteristic and Rangeability of Control Valves. 1985.</li>
</ul>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Liquid critical pressure ratio factor, abbreviated as <span class="math inline">\(F_F\)</span>, a dimensionless number, is the ratio between pressure in vena contracta and the pressure at the maximum effective choke pressure drop across the valve. <span class="math inline">\(F_F = 0.96 - 0.28 \cdot \sqrt{\frac{P_v}{221.2}}\)</span><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Manufacturer’s recommended cavitation limit <span class="math inline">\(\sigma_{mr}\)</span><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Maximum noise and vibration level <span class="math inline">\(\sigma_{mv}\)</span><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://en.wikipedia.org/wiki/Computational_fluid_dynamics">Computational Fluid Dynamics</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="ratral/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>